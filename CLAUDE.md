# 周易玄学网站 — Claude Code 开发说明

## 项目概述
这是一个中文传统玄学知识网站，涵盖：八字、风水、面相、手相、奇门遁甲五大模块。
使用纯 HTML + CSS + JS，无框架依赖，黑金中式美学设计风格。

---

## 文件结构
```
zhouyi/
├── index.html          # 主入口页面（导航+英雄区）
├── css/
│   └── style.css       # 全局样式（CSS变量、布局、动画）
├── js/
│   ├── main.js         # 通用交互（导航、tabs、滚动）
│   └── bazi.js         # 八字排盘计算逻辑
├── pages/
│   ├── bazi.html       # 八字页面
│   ├── fengshui.html   # 风水页面
│   ├── mianxiang.html  # 面相页面
│   ├── shouxiang.html  # 手相页面
│   └── qimen.html      # 奇门遁甲页面
├── assets/             # 图片资源目录（待添加）
└── CLAUDE.md           # 本文件
```

---

## 设计规范

### 颜色系统（CSS Variables）
```css
--gold: #c9a84c          /* 主金色 */
--gold-light: #e8c97a    /* 浅金色 */
--crimson: #8b1a1a       /* 深红 */
--crimson-light: #c0392b /* 亮红 */
--ink: #0a0a0f           /* 最深背景 */
--ink-2: #12121a         /* 卡片背景 */
--ink-3: #1a1a26         /* 输入框背景 */
--parchment: #f5edd6     /* 羊皮纸色 */
--text-main: #f0e6cc     /* 主文字 */
--text-dim: #a89070      /* 次要文字 */
--jade: #2d6a4f          /* 翠绿 */
--jade-light: #52b788    /* 浅翠绿 */
```

### 五行颜色
```
木 → #52b788 (绿)
火 → #e74c3c (红)
土 → #c9a84c (金)
金 → #cccccc (银)
水 → #5dade2 (蓝)
```

### 字体
- 标题/装饰：Ma Shan Zheng（Google Fonts）
- 正文：Noto Serif SC（Google Fonts）

---

## 待完成功能（需要修改的地方）

### 🔴 高优先级

#### 1. 八字计算精确化 (`js/bazi.js`)
当前问题：
- 月柱计算未使用精确节气时间，误差较大
- 需接入完整节气数据库（1900-2100年）
- 需实现精确的大运起运年龄计算
- 需增加纳音五行完整对照表

```javascript
// 需要添加的节气数据结构示例：
const SOLAR_TERMS = {
  1990: {
    lichun: { month: 2, day: 4, hour: 3, minute: 14 },  // 立春
    // ... 24个节气
  }
}
```

#### 2. 八字大运排盘 (`pages/bazi.html`)
- 显示从几岁起运
- 显示未来10步大运（每步10年的天干地支）
- 高亮当前所在大运
- 显示流年（当前年太岁）

#### 3. 图片系统 (`assets/`)
需要添加的图片：
- `face-diagram.svg` — 面相百岁流年图（SVG绘制，标注各部位年龄）
- `palm-diagram.svg` — 手掌纹路图（标注各主线位置）
- `bagua-circle.svg` — 八卦圆形图（后天八卦方位）
- `qimen-grid.svg` — 奇门遁甲九宫格式图
- 各章节配图（通过 Unsplash 或 SVG 绘制）

#### 4. 风水计算器 (`pages/fengshui.html`)
- 输入房屋朝向 → 自动判断东四宅/西四宅
- 输入出生年份 → 判断东四命/西四命
- 输出命宅配合情况与建议

### 🟡 中优先级

#### 5. 面相交互图 (`pages/mianxiang.html`)
- SVG 绘制人脸轮廓图
- 鼠标悬停各部位 → 弹出详细说明
- 点击部位 → 展开详细内容面板

#### 6. 手相交互图 (`pages/shouxiang.html`)
- SVG 绘制手掌轮廓图
- 标注各主要掌纹位置
- 交互式点击查看解释

#### 7. 奇门排盘 (`pages/qimen.html`)
- 输入日期时辰 → 自动排出奇门局
- 显示当前时辰的门/星/神/干组合
- 判断出行方向吉凶

#### 8. 九宫飞星流年计算 (`pages/fengshui.html`)
- 输入当前年份 → 自动计算飞星入中
- 显示各宫飞星分布
- 标注吉凶宫位及化解方法

### 🟢 低优先级

#### 9. 用户体验优化
- 深色/浅色主题切换（羊皮纸浅色模式）
- 收藏/保存排盘结果（localStorage）
- 分享功能（生成图片或链接）
- 移动端手势支持

#### 10. 内容扩充
- 八字格局详解（正官格、伤官格、食神格等）
- 紫微斗数入门（可新增第六大模块）
- 择日学基础
- 梅花易数

---

## 八字计算逻辑说明

### 当前实现（简化版）
```javascript
// 年柱：(年份-4) mod 10/12
// 月柱：以月份粗略计算，未用节气校正
// 日柱：朱利安日数公式
// 时柱：依日干推时干（五虎遁年起月法类推）
```

### 需要改进为（精确版）
```javascript
// 1. 查询节气数据库，确定月柱（以节气为月令分界）
// 2. 日柱使用精确万年历数据
// 3. 大运：统计出生日到前/后节气天数 ÷ 3 = 起运岁数
// 4. 纳音：完整60甲子纳音对照
```

---

## 图片建议方案

由于版权问题，建议：
1. **SVG 内联图形**：面相图、手相图、八卦图均可用 SVG 代码绘制
2. **CSS 装饰**：用 CSS 渐变/图案替代部分图片需求
3. **Unsplash API**：自然风景类图片（山水、古建筑）使用免费图源
4. **Unicode 符号**：大量使用汉字、卦象符号（☰☱☲☳☴☵☶☷☯）

---

## 开发命令
```bash
# 本地预览
python3 -m http.server 8080
# 然后访问 http://localhost:8080

# 或使用 live-server
npx live-server --port=8080
```

---

## 注意事项
1. **内容准确性**：玄学内容以传统典籍为准，不添加现代伪科学说法
2. **免责声明**：页面底部保留"仅供参考，不构成实际建议"声明
3. **字符编码**：所有文件使用 UTF-8 编码
4. **浏览器兼容**：目标 Chrome/Safari/Firefox 最新版，不需要兼容 IE
5. **性能**：单个 HTML 文件不超过 500KB，图片懒加载

---

## 当前已完成内容清单

### 八字 ✅
- [x] 四柱排盘计算器（年/月/日/时）
- [x] 天干地支知识
- [x] 十神详解
- [x] 十二长生
- [x] 神煞介绍（10种）
- [x] 二十四节气
- [x] 三元九运
- [x] 大运流年说明
- [x] 寒/热/平命分类
- [x] 五行分布可视化
- [ ] 精确节气计算
- [ ] 大运排列显示
- [ ] 纳音完整表

### 风水 ✅
- [x] 洛书九宫八卦方位图（交互）
- [x] 八宅定宅法
- [x] 东四命/西四命/东四宅/西四宅
- [x] 四吉位四凶位对照表
- [x] 九星详解及化解
- [x] 11种形煞详解
- [x] 居家/办公/店铺风水
- [x] 旺丁旺财四局
- [x] 三元不败局
- [ ] 风水计算器（朝向→命宅）
- [ ] 九宫飞星流年计算器

### 面相 ✅
- [x] 百岁流年图说明
- [x] 十二宫详解
- [x] 16个面部部位详解
- [ ] SVG 交互面部图

### 手相 ✅
- [x] 8条主线详解
- [x] 七大丘陵
- [x] 手型与五指
- [x] 特殊掌纹
- [ ] SVG 交互手掌图

### 奇门遁甲 ✅
- [x] 九宫基础格局
- [x] 九星详解
- [x] 八门详解
- [x] 八神详解
- [x] 实际应用场景
- [ ] 奇门排盘计算器
